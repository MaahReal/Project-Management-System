<!DOCTYPE html>
<html>

<head>
  <title>Manager || AddClient</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<style>
  .container1 {
    height: 60px;
    background-color: #AF9B60;
    margin-top: 20px;
    border-radius: 10px;


  }


  .contain {
    background-color: #FF69B4;
    height: 650px;
    width: 1140px;
    margin-left: 230px;
    margin-top: 20px;
    border-radius: 10px;
  }

  .table {
    height: 400px;
    width: 850px;
    margin-left: 100px;
    color: black;
  }
</style>

<body>

  <div class="container">

    <!-- Button to Open the Modal -->
    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Client Information</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <!-- Modal body -->

          <form method="POST" action="/manage">
            <div class="modal-body">
              <h4 class="modal-title">Last Name</h4><br>
              <input type="text" name="lastname" id="last_name"><br>
              <h4 class="modal-title">First Name</h4><br>
              <input type="text" name="firstname" id="first_name"><br>
              <!-- <input type="submit" value="Add"> -->
            </div>
          </form>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button id="btn-client" type="button" class="btn btn-danger" data-dismiss="modal" type="GET">Add</button>
          </div>

        </div>
      </div>
    </div>

  </div>

  <!-- Modal para sa add project -->
  <div class="container">

      <!-- Button to Open the Modal -->
      <!-- The Modal -->
      <div class="modal" id="myModal1">
        <div class="modal-dialog">
          <div class="modal-content">
  
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Project Information</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
  
            <!-- Modal body -->
  
            <form method="POST" action="">
              <div class="modal-body">
                <input type="text" value="" id="Ngan" style="display: none">
                <h4 class="modal-title">Project Name</h4><br>
                <input type="text" name="projectname" id="pname"><br>
                <!-- <h4 class="modal-title">Task 1</h4><br>
                <input type="text" name="task1" id="task_1"><br> 
                <h4 class="modal-title">Task 2</h4><br>
                <input type="text" name="task2" id="task_2"><br> 
                <h4 class="modal-title">Task 3</h4><br>
                <input type="text" name="task3" id="task_3"><br>  -->
                <!-- <input type="submit" value="Add">
              </div>
            </form>
            <!-- Modal footer -->
            <div class="modal-footer">
              <button href="/project" id="btn-project" type="button" class="btn btn-danger" data-dismiss="modal" type="GET">Add</button>
            </div>
  
          </div>
        </div>
      </div>
  
    </div>


  <div class="container" style="margin-top: 5%;">
    <button data-toggle="modal" data-target="#myModal" type="button" class="btn btn-primary"
      style="float: right; margin-right: 229px;" id="add">Add Client</button>
   
    <h2 style="margin-left: 330px;">CLIENT</h2>
    <center>
      <table class="table table-striped table-sm" style="width: 50%">
        <thead class="thead-dark ">
          <tr>
            <th>Complete Name</th>
            <!-- <th>Project Name</th>
            <th>Task</th> -->
            <th></th>
          </tr>
        </thead>
        <tbody>
          
          <!-- <td>
            <select style="width: 70%">
              <option value="...."></option>
              <option value="Task 1">Task 1</option>
              <option value="Task 2">Task 2</option>
              <option value="Task31">Task 3</option>
            </select>
          </td> -->

          <% Clients.forEach(function(user){%>
            <tr>
              <td><%= user.fullname %></td>
              <td><button data-toggle="modal" data-target="#myModal1" type="button" class="ADD btn btn-primary"
                style="float: right; margin-right: -6px;" data-id=" <%= user.fullname %>"> ADD PROJECT</button></td>
            </tr>
              
          <%})%>
          
        </tbody>

      </table>
    </center>

  </div><br><br><br>



</body>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
  $(document).ready(function () {
    $("#btn-client").click(function () {
      var client = { lastname: $("#last_name").val(), firstname: $("#first_name").val() }
      console.log(client);
      $.ajax({
        type: "POST",
        url: "/addclient",
        data: client,
        success: function (data) {
          console.log("success");
        }
      })
      location.reload();
    });
    $('#btn-project').click(function (){
      var client =$('#Ngan').val();
      var pro = {projectname: $("#pname").val(),clientname:client}
      console.log(pro);
       console.log($('#Ngan').val());
      $.ajax({
        type: "POST",
        url: "/project-input",
        data: pro,
        success: function(data){
          console.log("success");
          window.location.href('/project');
        }
      })
    })
    // $('#ADD').click(function(){
    //   console.log(($(this).attr('data-id')))
    // })
  });
  $(document).on("click", ".ADD", function () {
     var eventId = $(this).data('id');
     //$('#idHolder').html( eventId );
     //console.log(eventId)
     $('#Ngan').val(eventId);
});

</script>

</html>